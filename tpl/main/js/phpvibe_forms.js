(function($){var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp)return this.attr.apply(this,arguments);var val=this.prop.apply(this,arguments);if(val&&val.jquery||typeof val==="string")return val;return this.attr.apply(this,arguments)};$.fn.ajaxSubmit=function(options){if(!this.length){log("ajaxSubmit: skipping submit process - no element selected");return this}var method,
action,url,$form=this;if(typeof options=="function")options={success:options};method=options.type||this.attr2("method");action=options.url||this.attr2("action");url=typeof action==="string"?$.trim(action):"";url=url||(window.location.href||"");if(url)url=(url.match(/^([^#]+)/)||[])[1];options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options);var veto={};this.trigger("form-pre-serialize",
[this,options,veto]);if(veto.veto){log("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var traditional=options.traditional;if(traditional===undefined)traditional=$.ajaxSettings.traditional;var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,
traditional)}if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[a,this,options,veto]);if(veto.veto){log("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var q=$.param(a,traditional);if(qx)q=q?q+"&"+qx:qx;if(options.type.toUpperCase()=="GET"){options.url+=(options.url.indexOf("?")>=0?"&":"?")+q;options.data=null}else options.data=q;var callbacks=
[];if(options.resetForm)callbacks.push(function(){$form.resetForm()});if(options.clearForm)callbacks.push(function(){$form.clearForm(options.includeHidden)});if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else if(options.success)callbacks.push(options.success);options.success=function(data,status,xhr){var context=options.context||
this;for(var i=0,max=callbacks.length;i<max;i++)callbacks[i].apply(context,[data,status,xhr||$form,$form])};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form])}}if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form])}}var fileInputs=$('input[type=file]:enabled[value!=""]',
this);var hasFileInputs=fileInputs.length>0;var mp="multipart/form-data";var multipart=$form.attr("enctype")==mp||$form.attr("encoding")==mp;var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame))if(options.closeKeepAlive)$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a)});else jqxhr=fileUploadIframe(a);else if((hasFileInputs||multipart)&&fileAPI)jqxhr=
fileUploadXhr(a);else jqxhr=$.ajax(options);$form.removeData("jqxhr").data("jqxhr",jqxhr);for(var k=0;k<elements.length;k++)elements[k]=null;this.trigger("form-submit-notify",[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split("&");var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g," ");part=serialized[i].split("=");result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])])}return result}
function fileUploadXhr(a){var formdata=new FormData;for(var i=0;i<a.length;i++)formdata.append(a[i].name,a[i].value);if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++)if(serializedData[i])formdata.append(serializedData[i][0],serializedData[i][1])}options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||"POST"});if(options.uploadProgress)s.xhr=function(){var xhr=$.ajaxSettings.xhr();
if(xhr.upload)xhr.upload.addEventListener("progress",function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable)percent=Math.ceil(position/total*100);options.uploadProgress(event,position,total,percent)},false);return xhr};s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata;if(beforeSend)beforeSend.call(this,xhr,o)};return $.ajax(s)}function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,
n,timedOut,timeoutHandle;var deferred=$.Deferred();if(a)for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp)el.prop("disabled",false);else el.removeAttr("disabled")}s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id="jqFormIO"+(new Date).getTime();if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2("name");if(!n)$io.attr2("name",id);else id=n}else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:"absolute",top:"-1000px",left:"-1000px"})}io=$io[0];
xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=status==="timeout"?"timeout":"aborted";log("aborting upload... "+e);this.aborted=1;try{if(io.contentWindow.document.execCommand)io.contentWindow.document.execCommand("Stop")}catch(ignore){}$io.attr("src",s.iframeSrc);xhr.error=e;if(s.error)s.error.call(s.context,xhr,e,status);if(g)$.event.trigger("ajaxError",
[xhr,s,e]);if(s.complete)s.complete.call(s.context,xhr,e)}};g=s.global;if(g&&0===$.active++)$.event.trigger("ajaxStart");if(g)$.event.trigger("ajaxSend",[xhr,s]);if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global)$.active--;deferred.reject();return deferred}if(xhr.aborted){deferred.reject();return deferred}sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+".x"]=form.clk_x;s.extraData[n+
".y"]=form.clk_y}}}var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow)doc=frame.contentWindow.document}catch(err){log("cannot get iframe.contentWindow document: "+err)}if(doc)return doc;try{doc=frame.contentDocument?frame.contentDocument:frame.document}catch(err){log("cannot get iframe.contentDocument: "+err);doc=frame.document}return doc}var csrf_token=$("meta[name=csrf-token]").attr("content");var csrf_param=$("meta[name=csrf-param]").attr("content");
if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token}function doSubmit(){var t=$form.attr2("target"),a=$form.attr2("action");form.setAttribute("target",id);if(!method)form.setAttribute("method","POST");if(a!=s.url)form.setAttribute("action",s.url);if(!s.skipEncodingOverride&&(!method||/post/i.test(method)))$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});if(s.timeout)timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT)},
s.timeout);function checkState(){try{var state=getDoc(io).readyState;log("state = "+state);if(state&&state.toLowerCase()=="uninitialized")setTimeout(checkState,50)}catch(e){log("Server abort: ",e," (",e.name,")");cb(SERVER_ABORT);if(timeoutHandle)clearTimeout(timeoutHandle);timeoutHandle=undefined}}var extraInputs=[];try{if(s.extraData)for(var n in s.extraData)if(s.extraData.hasOwnProperty(n))if($.isPlainObject(s.extraData[n])&&(s.extraData[n].hasOwnProperty("name")&&s.extraData[n].hasOwnProperty("value")))extraInputs.push($('<input type="hidden" name="'+
s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);else extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);if(!s.iframeTarget){$io.appendTo("body");if(io.attachEvent)io.attachEvent("onload",cb);else io.addEventListener("load",cb,false)}setTimeout(checkState,15);try{form.submit()}catch(err){var submitFn=document.createElement("form").submit;submitFn.apply(form)}}finally{form.setAttribute("action",a);if(t)form.setAttribute("target",t);
else $form.removeAttr("target");$(extraInputs).remove()}}if(s.forceSync)doSubmit();else setTimeout(doSubmit,10);var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed)return;doc=getDoc(io);if(!doc){log("cannot access response document");e=SERVER_ABORT}if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort("timeout");deferred.reject(xhr,"timeout");return}else if(e==SERVER_ABORT&&xhr){xhr.abort("server abort");deferred.reject(xhr,"error","server abort");return}if(!doc||
doc.location.href==s.iframeSrc)if(!timedOut)return;if(io.detachEvent)io.detachEvent("onload",cb);else io.removeEventListener("load",cb,false);var status="success",errMsg;try{if(timedOut)throw"timeout";var isXml=s.dataType=="xml"||(doc.XMLDocument||$.isXMLDoc(doc));log("isXml="+isXml);if(!isXml&&(window.opera&&(doc.body===null||!doc.body.innerHTML)))if(--domCheckCount){log("requeing onLoad callback, DOM not available");setTimeout(cb,250);return}var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=
docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml)s.dataType="xml";xhr.getResponseHeader=function(header){var headers={"content-type":s.dataType};return headers[header]};if(docRoot){xhr.status=Number(docRoot.getAttribute("status"))||xhr.status;xhr.statusText=docRoot.getAttribute("statusText")||xhr.statusText}var dt=(s.dataType||"").toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName("textarea")[0];if(ta){xhr.responseText=
ta.value;xhr.status=Number(ta.getAttribute("status"))||xhr.status;xhr.statusText=ta.getAttribute("statusText")||xhr.statusText}else if(scr){var pre=doc.getElementsByTagName("pre")[0];var b=doc.getElementsByTagName("body")[0];if(pre)xhr.responseText=pre.textContent?pre.textContent:pre.innerText;else if(b)xhr.responseText=b.textContent?b.textContent:b.innerText}}else if(dt=="xml"&&(!xhr.responseXML&&xhr.responseText))xhr.responseXML=toXml(xhr.responseText);try{data=httpData(xhr,dt,s)}catch(err){status=
"parsererror";xhr.error=errMsg=err||status}}catch(err){log("error caught: ",err);status="error";xhr.error=errMsg=err||status}if(xhr.aborted){log("upload aborted");status=null}if(xhr.status)status=xhr.status>=200&&xhr.status<300||xhr.status===304?"success":"error";if(status==="success"){if(s.success)s.success.call(s.context,data,"success",xhr);deferred.resolve(xhr.responseText,"success",xhr);if(g)$.event.trigger("ajaxSuccess",[xhr,s])}else if(status){if(errMsg===undefined)errMsg=xhr.statusText;if(s.error)s.error.call(s.context,
xhr,status,errMsg);deferred.reject(xhr,"error",errMsg);if(g)$.event.trigger("ajaxError",[xhr,s,errMsg])}if(g)$.event.trigger("ajaxComplete",[xhr,s]);if(g&&!--$.active)$.event.trigger("ajaxStop");if(s.complete)s.complete.call(s.context,xhr,status);callbackProcessed=true;if(s.timeout)clearTimeout(timeoutHandle);setTimeout(function(){if(!s.iframeTarget)$io.remove();xhr.responseXML=null},100)}var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject("Microsoft.XMLDOM");doc.async=
"false";doc.loadXML(s)}else doc=(new DOMParser).parseFromString(s,"text/xml");return doc&&(doc.documentElement&&doc.documentElement.nodeName!="parsererror")?doc:null};var parseJSON=$.parseJSON||function(s){return window["eval"]("("+s+")")};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror")if($.error)$.error("parsererror");if(s&&
s.dataFilter)data=s.dataFilter(data,type);if(typeof data==="string")if(type==="json"||!type&&ct.indexOf("json")>=0)data=parseJSON(data);else if(type==="script"||!type&&ct.indexOf("javascript")>=0)$.globalEval(data);return data};return deferred}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log("DOM not ready, queuing ajaxForm");$(function(){$(o.s,
o.c).ajaxForm(options)});return this}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this}if(options.delegation){$(document).off("submit.form-plugin",this.selector,doAjaxSubmit).off("click.form-plugin",this.selector,captureSubmittingElement).on("submit.form-plugin",this.selector,options,doAjaxSubmit).on("click.form-plugin",this.selector,options,captureSubmittingElement);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",options,doAjaxSubmit).bind("click.form-plugin",
options,captureSubmittingElement)};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options)}}function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!$el.is("[type=submit],[type=image]")){var t=$el.closest("[type=submit]");if(t.length===0)return;target=t[0]}var form=this;form.clk=target;if(target.type=="image")if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY}else if(typeof $.fn.offset=="function"){var offset=
$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop}setTimeout(function(){form.clk=form.clk_x=form.clk_y=null},100)}$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0)return a;var form=this[0];var els=semantic?form.getElementsByTagName("*"):form.elements;if(!els)return a;var i,j,n,v,el,max,
jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled)continue;if(semantic&&(form.clk&&el.type=="image")){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}continue}v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements)elements.push(el);for(j=0,jmax=v.length;j<jmax;j++)a.push({name:n,value:v[j]})}else if(feature.fileapi&&el.type=="file"){if(elements)elements.push(el);var files=el.files;
if(files.length)for(j=0;j<files.length;j++)a.push({name:n,value:files[j],type:el.type});else a.push({name:n,value:"",type:el.type})}else if(v!==null&&typeof v!="undefined"){if(elements)elements.push(el);a.push({name:n,value:v,type:el.type,required:el.required})}}if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&(!input.disabled&&input.type=="image")){a.push({name:n,value:$input.val()});a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}}return a};
$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n)return;var v=$.fieldValue(this,successful);if(v&&v.constructor==Array)for(var i=0,max=v.length;i<max;i++)a.push({name:n,value:v[i]});else if(v!==null&&typeof v!="undefined")a.push({name:this.name,value:v})});return $.param(a)};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=
$.fieldValue(el,successful);if(v===null||(typeof v=="undefined"||v.constructor==Array&&!v.length))continue;if(v.constructor==Array)$.merge(val,v);else val.push(v)}return val};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined)successful=true;if(successful&&(!n||(el.disabled||(t=="reset"||(t=="button"||((t=="checkbox"||t=="radio")&&!el.checked||((t=="submit"||t=="image")&&(el.form&&el.form.clk!=el)||tag=="select"&&el.selectedIndex==-1)))))))return null;
if(tag=="select"){var index=el.selectedIndex;if(index<0)return null;var a=[],ops=el.options;var one=t=="select-one";var max=one?index+1:ops.length;for(var i=one?index:0;i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v)v=op.attributes&&(op.attributes["value"]&&!op.attributes["value"].specified)?op.text:op.value;if(one)return v;a.push(v)}}return a}return $(el).val()};$.fn.clearForm=function(includeHidden){return this.each(function(){$("input,select,textarea",this).clearFields(includeHidden)})};
$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=="textarea")this.value="";else if(t=="checkbox"||t=="radio")this.checked=false;else if(tag=="select")this.selectedIndex=-1;else if(t=="file")if(/MSIE/.test(navigator.userAgent))$(this).replaceWith($(this).clone(true));else $(this).val("");else if(includeHidden)if(includeHidden===
true&&/hidden/.test(t)||typeof includeHidden=="string"&&$(this).is(includeHidden))this.value=""})};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};$.fn.enable=function(b){if(b===undefined)b=true;return this.each(function(){this.disabled=!b})};$.fn.selected=function(select){if(select===undefined)select=true;return this.each(function(){var t=this.type;if(t=="checkbox"||t=="radio")this.checked=select;
else if(this.tagName.toLowerCase()=="option"){var $sel=$(this).parent("select");if(select&&($sel[0]&&$sel[0].type=="select-one"))$sel.find("option").selected(false);this.selected=select}})};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug)return;var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(msg);else if(window.opera&&window.opera.postError)window.opera.postError(msg)}})(jQuery);
(function($){var methods={init:function(options){var form=this;if(!form.data("jqv")||form.data("jqv")==null){options=methods._saveOptions(form,options);$(document).on("click",".formError",function(){$(this).fadeOut(150,function(){$(this).parent(".formErrorOuter").remove();$(this).remove()})})}return this},attach:function(userOptions){var form=this;var options;if(userOptions)options=methods._saveOptions(form,userOptions);else options=form.data("jqv");options.validateAttribute=form.find("[data-validation-engine*=validate]").length?
"data-validation-engine":"class";if(options.binded){form.on(options.validationEventTrigger,"["+options.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",methods._onFieldEvent);form.on("click","["+options.validateAttribute+"*=validate][type=checkbox],["+options.validateAttribute+"*=validate][type=radio]",methods._onFieldEvent);form.on(options.validationEventTrigger,"["+options.validateAttribute+"*=validate][class*=datepicker]",{"delay":300},methods._onFieldEvent)}if(options.autoPositionUpdate)$(window).bind("resize",
{"noAnimation":true,"formElem":form},methods.updatePromptsPosition);form.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);form.removeData("jqv_submitButton");form.on("submit",methods._onSubmitEvent);return this},detach:function(){var form=this;var options=form.data("jqv");form.find("["+options.validateAttribute+"*=validate]").not("[type=checkbox]").off(options.validationEventTrigger,
methods._onFieldEvent);form.find("["+options.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",methods._onFieldEvent);form.off("submit",methods.onAjaxFormComplete);form.off("submit",methods.onAjaxFormComplete);form.removeData("jqv");form.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);
form.removeData("jqv_submitButton");if(options.autoPositionUpdate)$(window).unbind("resize",methods.updatePromptsPosition);return this},validate:function(){var element=$(this);var valid=null;if(element.is("form")||element.hasClass("validationEngineContainer"))if(element.hasClass("validating"))return false;else{element.addClass("validating");var options=element.data("jqv");var valid=methods._validateFields(this);setTimeout(function(){element.removeClass("validating")},100);if(valid&&options.onSuccess)options.onSuccess();
else if(!valid&&options.onFailure)options.onFailure()}else if(element.is("form")||element.hasClass("validationEngineContainer"))element.removeClass("validating");else{var form=element.closest("form, .validationEngineContainer"),options=form.data("jqv")?form.data("jqv"):$.validationEngine.defaults,valid=methods._validateField(element,options);if(valid&&options.onFieldSuccess)options.onFieldSuccess();else if(options.onFieldFailure&&options.InvalidFields.length>0)options.onFieldFailure()}if(options.onValidationComplete)return!!options.onValidationComplete(form,
valid);return valid},updatePromptsPosition:function(event){if(event&&this==window){var form=event.data.formElem;var noAnimation=event.data.noAnimation}else var form=$(this.closest("form, .validationEngineContainer"));var options=form.data("jqv");form.find("["+options.validateAttribute+"*=validate]").not(":disabled").each(function(){var field=$(this);if(options.prettySelect&&field.is(":hidden"))field=form.find("#"+options.usePrefix+field.attr("id")+options.useSuffix);var prompt=methods._getPrompt(field);
var promptText=$(prompt).find(".formErrorContent").html();if(prompt)methods._updatePrompt(field,$(prompt),promptText,undefined,false,options,noAnimation)});return this},showPrompt:function(promptText,type,promptPosition,showArrow){var form=this.closest("form, .validationEngineContainer");var options=form.data("jqv");if(!options)options=methods._saveOptions(this,options);if(promptPosition)options.promptPosition=promptPosition;options.showArrow=showArrow==true;methods._showPrompt(this,promptText,type,
false,options);return this},hide:function(){var form=$(this).closest("form, .validationEngineContainer");var options=form.data("jqv");var fadeDuration=options&&options.fadeDuration?options.fadeDuration:0.3;var closingtag;if($(this).is("form")||$(this).hasClass("validationEngineContainer"))closingtag="parentForm"+methods._getClassName($(this).attr("id"));else closingtag=methods._getClassName($(this).attr("id"))+"formError";$("."+closingtag).fadeTo(fadeDuration,0.3,function(){$(this).parent(".formErrorOuter").remove();
$(this).remove()});return this},hideAll:function(){var form=this;var options=form.data("jqv");var duration=options?options.fadeDuration:300;$(".formError").fadeTo(duration,300,function(){$(this).parent(".formErrorOuter").remove();$(this).remove()});return this},_onFieldEvent:function(event){var field=$(this);var form=field.closest("form, .validationEngineContainer");var options=form.data("jqv");options.eventTrigger="field";window.setTimeout(function(){methods._validateField(field,options);if(options.InvalidFields.length==
0&&options.onFieldSuccess)options.onFieldSuccess();else if(options.InvalidFields.length>0&&options.onFieldFailure)options.onFieldFailure()},event.data?event.data.delay:0)},_onSubmitEvent:function(){var form=$(this);var options=form.data("jqv");if(form.data("jqv_submitButton")){var submitButton=$("#"+form.data("jqv_submitButton"));if(submitButton)if(submitButton.length>0)if(submitButton.hasClass("validate-skip")||submitButton.attr("data-validation-engine-skip")=="true")return true}options.eventTrigger=
"submit";var r=methods._validateFields(form);if(r&&options.ajaxFormValidation){methods._validateFormWithAjax(form,options);return false}if(options.onValidationComplete)return!!options.onValidationComplete(form,r);return r},_checkAjaxStatus:function(options){var status=true;$.each(options.ajaxValidCache,function(key,value){if(!value){status=false;return false}});return status},_checkAjaxFieldStatus:function(fieldid,options){return options.ajaxValidCache[fieldid]==true},_validateFields:function(form){var options=
form.data("jqv");var errorFound=false;form.trigger("jqv.form.validating");var first_err=null;form.find("["+options.validateAttribute+"*=validate]").not(":disabled").each(function(){var field=$(this);var names=[];if($.inArray(field.attr("name"),names)<0){errorFound|=methods._validateField(field,options);if(errorFound&&first_err==null)if(field.is(":hidden")&&options.prettySelect)first_err=field=form.find("#"+options.usePrefix+methods._jqSelector(field.attr("id"))+options.useSuffix);else first_err=field;
if(options.doNotShowAllErrosOnSubmit)return false;names.push(field.attr("name"));if(options.showOneMessage==true&&errorFound)return false}});form.trigger("jqv.form.result",[errorFound]);if(errorFound){if(options.scroll){var destination=first_err.offset().top;var fixleft=first_err.offset().left;var positionType=options.promptPosition;if(typeof positionType=="string"&&positionType.indexOf(":")!=-1)positionType=positionType.substring(0,positionType.indexOf(":"));if(positionType!="bottomRight"&&positionType!=
"bottomLeft"){var prompt_err=methods._getPrompt(first_err);if(prompt_err)destination=prompt_err.offset().top}if(options.scrollOffset)destination-=options.scrollOffset;if(options.isOverflown){var overflowDIV=$(options.overflownDIV);if(!overflowDIV.length)return false;var scrollContainerScroll=overflowDIV.scrollTop();var scrollContainerPos=-parseInt(overflowDIV.offset().top);destination+=scrollContainerScroll+scrollContainerPos-5;var scrollContainer=$(options.overflownDIV+":not(:animated)");scrollContainer.animate({scrollTop:destination},
1100,function(){if(options.focusFirstField)first_err.focus()})}else{$("html, body").animate({scrollTop:destination},1100,function(){if(options.focusFirstField)first_err.focus()});$("html, body").animate({scrollLeft:fixleft},1100)}}else if(options.focusFirstField)first_err.focus();return false}return true},_validateFormWithAjax:function(form,options){var data=form.serialize();var type=options.ajaxFormValidationMethod?options.ajaxFormValidationMethod:"GET";var url=options.ajaxFormValidationURL?options.ajaxFormValidationURL:
form.attr("action");var dataType=options.dataType?options.dataType:"json";$.ajax({type:type,url:url,cache:false,dataType:dataType,data:data,form:form,methods:methods,options:options,beforeSend:function(){return options.onBeforeAjaxFormValidation(form,options)},error:function(data,transport){methods._ajaxError(data,transport)},success:function(json){if(dataType=="json"&&json!==true){var errorInForm=false;for(var i=0;i<json.length;i++){var value=json[i];var errorFieldId=value[0];var errorField=$($("#"+
errorFieldId)[0]);if(errorField.length==1){var msg=value[2];if(value[1]==true)if(msg==""||!msg)methods._closePrompt(errorField);else{if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt)msg=txt}if(options.showPrompts)methods._showPrompt(errorField,msg,"pass",false,options,true)}else{errorInForm|=true;if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt)msg=txt}if(options.showPrompts)methods._showPrompt(errorField,msg,"",false,options,true)}}}options.onAjaxFormComplete(!errorInForm,
form,json,options)}else options.onAjaxFormComplete(true,form,json,options)}})},_validateField:function(field,options,skipAjaxValidation){if(!field.attr("id")){field.attr("id","form-validation-field-"+$.validationEngine.fieldIdCounter);++$.validationEngine.fieldIdCounter}if(!options.validateNonVisibleFields&&(field.is(":hidden")&&!options.prettySelect||field.parent().is(":hidden")))return false;var rulesParsing=field.attr(options.validateAttribute);var getRules=/validate\[(.*)\]/.exec(rulesParsing);
if(!getRules)return false;var str=getRules[1];var rules=str.split(/\[|,|\]/);var isAjaxValidator=false;var fieldName=field.attr("name");var promptText="";var promptType="";var required=false;var limitErrors=false;options.isError=false;options.showArrow=true;if(options.maxErrorsPerField>0)limitErrors=true;var form=$(field.closest("form, .validationEngineContainer"));for(var i=0;i<rules.length;i++){rules[i]=rules[i].replace(" ","");if(rules[i]==="")delete rules[i]}for(var i=0,field_errors=0;i<rules.length;i++){if(limitErrors&&
field_errors>=options.maxErrorsPerField){if(!required){var have_required=$.inArray("required",rules);required=have_required!=-1&&have_required>=i}break}var errorMsg=undefined;switch(rules[i]){case "required":required=true;errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._required);break;case "custom":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._custom);break;case "groupRequired":var classGroup="["+options.validateAttribute+"*="+rules[i+
1]+"]";var firstOfGroup=form.find(classGroup).eq(0);if(firstOfGroup[0]!=field[0]){methods._validateField(firstOfGroup,options,skipAjaxValidation);options.showArrow=true}errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._groupRequired);if(errorMsg)required=true;options.showArrow=false;break;case "ajax":errorMsg=methods._ajax(field,rules,i,options);if(errorMsg)promptType="load";break;case "minSize":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minSize);
break;case "maxSize":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._maxSize);break;case "min":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._min);break;case "max":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._max);break;case "past":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._past);break;case "future":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,
methods._future);break;case "dateRange":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";options.firstOfGroup=form.find(classGroup).eq(0);options.secondOfGroup=form.find(classGroup).eq(1);if(options.firstOfGroup[0].value||options.secondOfGroup[0].value)errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dateRange);if(errorMsg)required=true;options.showArrow=false;break;case "dateTimeRange":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";
options.firstOfGroup=form.find(classGroup).eq(0);options.secondOfGroup=form.find(classGroup).eq(1);if(options.firstOfGroup[0].value||options.secondOfGroup[0].value)errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dateTimeRange);if(errorMsg)required=true;options.showArrow=false;break;case "maxCheckbox":field=$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._maxCheckbox);break;case "minCheckbox":field=
$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minCheckbox);break;case "equals":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._equals);break;case "funcCall":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._funcCall);break;case "creditCard":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._creditCard);break;case "condRequired":errorMsg=
methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._condRequired);if(errorMsg!==undefined)required=true;break;default:}var end_validation=false;if(typeof errorMsg=="object")switch(errorMsg.status){case "_break":end_validation=true;break;case "_error":errorMsg=errorMsg.message;break;case "_error_no_prompt":return true;break;default:break}if(end_validation)break;if(typeof errorMsg=="string"){promptText+=errorMsg+"<br/>";options.isError=true;field_errors++}}if(!required&&(!field.val()&&
field.val().length<1))options.isError=false;var fieldType=field.prop("type");var positionType=field.data("promptPosition")||options.promptPosition;if((fieldType=="radio"||fieldType=="checkbox")&&form.find("input[name='"+fieldName+"']").size()>1){if(positionType==="inline")field=$(form.find("input[name='"+fieldName+"'][type!=hidden]:last"));else field=$(form.find("input[name='"+fieldName+"'][type!=hidden]:first"));options.showArrow=false}if(field.is(":hidden")&&options.prettySelect)field=form.find("#"+
options.usePrefix+methods._jqSelector(field.attr("id"))+options.useSuffix);if(options.isError&&options.showPrompts)methods._showPrompt(field,promptText,promptType,false,options);else if(!isAjaxValidator)methods._closePrompt(field);if(!isAjaxValidator)field.trigger("jqv.field.result",[field,options.isError,promptText]);var errindex=$.inArray(field[0],options.InvalidFields);if(errindex==-1){if(options.isError)options.InvalidFields.push(field[0])}else if(!options.isError)options.InvalidFields.splice(errindex,
1);methods._handleStatusCssClasses(field,options);if(options.isError&&options.onFieldFailure)options.onFieldFailure(field);if(!options.isError&&options.onFieldSuccess)options.onFieldSuccess(field);return options.isError},_handleStatusCssClasses:function(field,options){if(options.addSuccessCssClassToField)field.removeClass(options.addSuccessCssClassToField);if(options.addFailureCssClassToField)field.removeClass(options.addFailureCssClassToField);if(options.addSuccessCssClassToField&&!options.isError)field.addClass(options.addSuccessCssClassToField);
if(options.addFailureCssClassToField&&options.isError)field.addClass(options.addFailureCssClassToField)},_getErrorMessage:function(form,field,rule,rules,i,options,originalValidationMethod){var rule_index=jQuery.inArray(rule,rules);if(rule==="custom"||rule==="funcCall"){var custom_validation_type=rules[rule_index+1];rule=rule+"["+custom_validation_type+"]";delete rules[rule_index]}var alteredRule=rule;var element_classes=field.attr("data-validation-engine")?field.attr("data-validation-engine"):field.attr("class");
var element_classes_array=element_classes.split(" ");var errorMsg;if(rule=="future"||(rule=="past"||(rule=="maxCheckbox"||rule=="minCheckbox")))errorMsg=originalValidationMethod(form,field,rules,i,options);else errorMsg=originalValidationMethod(field,rules,i,options);if(errorMsg!=undefined){var custom_message=methods._getCustomErrorMessage($(field),element_classes_array,alteredRule,options);if(custom_message)errorMsg=custom_message}return errorMsg},_getCustomErrorMessage:function(field,classes,rule,
options){var custom_message=false;var validityProp=methods._validityProp[rule];if(validityProp!=undefined){custom_message=field.attr("data-errormessage-"+validityProp);if(custom_message!=undefined)return custom_message}custom_message=field.attr("data-errormessage");if(custom_message!=undefined)return custom_message;var id="#"+field.attr("id");if(typeof options.custom_error_messages[id]!="undefined"&&typeof options.custom_error_messages[id][rule]!="undefined")custom_message=options.custom_error_messages[id][rule]["message"];
else if(classes.length>0)for(var i=0;i<classes.length&&classes.length>0;i++){var element_class="."+classes[i];if(typeof options.custom_error_messages[element_class]!="undefined"&&typeof options.custom_error_messages[element_class][rule]!="undefined"){custom_message=options.custom_error_messages[element_class][rule]["message"];break}}if(!custom_message&&(typeof options.custom_error_messages[rule]!="undefined"&&typeof options.custom_error_messages[rule]["message"]!="undefined"))custom_message=options.custom_error_messages[rule]["message"];
return custom_message},_validityProp:{"required":"value-missing","custom":"custom-error","groupRequired":"value-missing","ajax":"custom-error","minSize":"range-underflow","maxSize":"range-overflow","min":"range-underflow","max":"range-overflow","past":"type-mismatch","future":"type-mismatch","dateRange":"type-mismatch","dateTimeRange":"type-mismatch","maxCheckbox":"range-overflow","minCheckbox":"range-underflow","equals":"pattern-mismatch","funcCall":"custom-error","creditCard":"pattern-mismatch",
"condRequired":"value-missing"},_required:function(field,rules,i,options,condRequired){switch(field.prop("type")){case "text":case "password":case "textarea":case "file":case "select-one":case "select-multiple":default:var field_val=$.trim(field.val());var dv_placeholder=$.trim(field.attr("data-validation-placeholder"));var placeholder=$.trim(field.attr("placeholder"));if(!field_val||(dv_placeholder&&field_val==dv_placeholder||placeholder&&field_val==placeholder))return options.allrules[rules[i]].alertText;
break;case "radio":case "checkbox":if(condRequired){if(!field.attr("checked"))return options.allrules[rules[i]].alertTextCheckboxMultiple;break}var form=field.closest("form, .validationEngineContainer");var name=field.attr("name");if(form.find("input[name='"+name+"']:checked").size()==0)if(form.find("input[name='"+name+"']:visible").size()==1)return options.allrules[rules[i]].alertTextCheckboxe;else return options.allrules[rules[i]].alertTextCheckboxMultiple;break}},_groupRequired:function(field,
rules,i,options){var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";var isValid=false;field.closest("form, .validationEngineContainer").find(classGroup).each(function(){if(!methods._required($(this),rules,i,options)){isValid=true;return false}});if(!isValid)return options.allrules[rules[i]].alertText},_custom:function(field,rules,i,options){var customRule=rules[i+1];var rule=options.allrules[customRule];var fn;if(!rule){alert("jqv:custom rule not found - "+customRule);return}if(rule["regex"]){var ex=
rule.regex;if(!ex){alert("jqv:custom regex not found - "+customRule);return}var pattern=new RegExp(ex);if(!pattern.test(field.val()))return options.allrules[customRule].alertText}else if(rule["func"]){fn=rule["func"];if(typeof fn!=="function"){alert("jqv:custom parameter 'function' is no function - "+customRule);return}if(!fn(field,rules,i,options))return options.allrules[customRule].alertText}else{alert("jqv:custom type not allowed "+customRule);return}},_funcCall:function(field,rules,i,options){var functionName=
rules[i+1];var fn;if(functionName.indexOf(".")>-1){var namespaces=functionName.split(".");var scope=window;while(namespaces.length)scope=scope[namespaces.shift()];fn=scope}else fn=window[functionName]||options.customFunctions[functionName];if(typeof fn=="function")return fn(field,rules,i,options)},_equals:function(field,rules,i,options){var equalsField=rules[i+1];if(field.val()!=$("#"+equalsField).val())return options.allrules.equals.alertText},_maxSize:function(field,rules,i,options){var max=rules[i+
1];var len=field.val().length;if(len>max){var rule=options.allrules.maxSize;return rule.alertText+max+rule.alertText2}},_minSize:function(field,rules,i,options){var min=rules[i+1];var len=field.val().length;if(len<min){var rule=options.allrules.minSize;return rule.alertText+min+rule.alertText2}},_min:function(field,rules,i,options){var min=parseFloat(rules[i+1]);var len=parseFloat(field.val());if(len<min){var rule=options.allrules.min;if(rule.alertText2)return rule.alertText+min+rule.alertText2;return rule.alertText+
min}},_max:function(field,rules,i,options){var max=parseFloat(rules[i+1]);var len=parseFloat(field.val());if(len>max){var rule=options.allrules.max;if(rule.alertText2)return rule.alertText+max+rule.alertText2;return rule.alertText+max}},_past:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("input[name='"+p.replace(/^#+/,"")+"']"));var pdate;if(p.toLowerCase()=="now")pdate=new Date;else if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))return;pdate=methods._parseDate(fieldAlt.val())}else pdate=
methods._parseDate(p);var vdate=methods._parseDate(field.val());if(vdate>pdate){var rule=options.allrules.past;if(rule.alertText2)return rule.alertText+methods._dateToString(pdate)+rule.alertText2;return rule.alertText+methods._dateToString(pdate)}},_future:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("input[name='"+p.replace(/^#+/,"")+"']"));var pdate;if(p.toLowerCase()=="now")pdate=new Date;else if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))return;pdate=
methods._parseDate(fieldAlt.val())}else pdate=methods._parseDate(p);var vdate=methods._parseDate(field.val());if(vdate<pdate){var rule=options.allrules.future;if(rule.alertText2)return rule.alertText+methods._dateToString(pdate)+rule.alertText2;return rule.alertText+methods._dateToString(pdate)}},_isDate:function(value){var dateRegEx=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);
return dateRegEx.test(value)},_isDateTime:function(value){var dateTimeRegEx=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);
return dateTimeRegEx.test(value)},_dateCompare:function(start,end){return new Date(start.toString())<new Date(end.toString())},_dateRange:function(field,rules,i,options){if(!options.firstOfGroup[0].value&&options.secondOfGroup[0].value||options.firstOfGroup[0].value&&!options.secondOfGroup[0].value)return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;if(!methods._isDate(options.firstOfGroup[0].value)||!methods._isDate(options.secondOfGroup[0].value))return options.allrules[rules[i]].alertText+
options.allrules[rules[i]].alertText2;if(!methods._dateCompare(options.firstOfGroup[0].value,options.secondOfGroup[0].value))return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2},_dateTimeRange:function(field,rules,i,options){if(!options.firstOfGroup[0].value&&options.secondOfGroup[0].value||options.firstOfGroup[0].value&&!options.secondOfGroup[0].value)return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;if(!methods._isDateTime(options.firstOfGroup[0].value)||
!methods._isDateTime(options.secondOfGroup[0].value))return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;if(!methods._dateCompare(options.firstOfGroup[0].value,options.secondOfGroup[0].value))return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2},_maxCheckbox:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize>nbCheck){options.showArrow=
false;if(options.allrules.maxCheckbox.alertText2)return options.allrules.maxCheckbox.alertText+" "+nbCheck+" "+options.allrules.maxCheckbox.alertText2;return options.allrules.maxCheckbox.alertText}},_minCheckbox:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize<nbCheck){options.showArrow=false;return options.allrules.minCheckbox.alertText+" "+nbCheck+" "+options.allrules.minCheckbox.alertText2}},
_creditCard:function(field,rules,i,options){var valid=false,cardNumber=field.val().replace(/ +/g,"").replace(/-+/g,"");var numDigits=cardNumber.length;if(numDigits>=14&&(numDigits<=16&&parseInt(cardNumber)>0)){var sum=0,i=numDigits-1,pos=1,digit,luhn=new String;do{digit=parseInt(cardNumber.charAt(i));luhn+=pos++%2==0?digit*2:digit}while(--i>=0);for(i=0;i<luhn.length;i++)sum+=parseInt(luhn.charAt(i));valid=sum%10==0}if(!valid)return options.allrules.creditCard.alertText},_ajax:function(field,rules,
i,options){var errorSelector=rules[i+1];var rule=options.allrules[errorSelector];var extraData=rule.extraData;var extraDataDynamic=rule.extraDataDynamic;var data={"fieldId":field.attr("id"),"fieldValue":field.val()};if(typeof extraData==="object")$.extend(data,extraData);else if(typeof extraData==="string"){var tempData=extraData.split("&");for(var i=0;i<tempData.length;i++){var values=tempData[i].split("=");if(values[0]&&values[0])data[values[0]]=values[1]}}if(extraDataDynamic){var tmpData=[];var domIds=
String(extraDataDynamic).split(",");for(var i=0;i<domIds.length;i++){var id=domIds[i];if($(id).length){var inputValue=field.closest("form, .validationEngineContainer").find(id).val();var keyValue=id.replace("#","")+"="+escape(inputValue);data[id.replace("#","")]=inputValue}}}if(options.eventTrigger=="field")delete options.ajaxValidCache[field.attr("id")];if(!options.isError&&!methods._checkAjaxFieldStatus(field.attr("id"),options)){$.ajax({type:options.ajaxFormValidationMethod,url:rule.url,cache:false,
dataType:"json",data:data,field:field,rule:rule,methods:methods,options:options,beforeSend:function(){},error:function(data,transport){methods._ajaxError(data,transport)},success:function(json){var errorFieldId=json[0];var errorField=$("#"+errorFieldId).eq(0);if(errorField.length==1){var status=json[1];var msg=json[2];if(!status){options.ajaxValidCache[errorFieldId]=false;options.isError=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt)msg=txt}}else msg=rule.alertText;
if(options.showPrompts)methods._showPrompt(errorField,msg,"",true,options)}else{options.ajaxValidCache[errorFieldId]=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt)msg=txt}}else msg=rule.alertTextOk;if(options.showPrompts)if(msg)methods._showPrompt(errorField,msg,"pass",true,options);else methods._closePrompt(errorField);if(options.eventTrigger=="submit")field.closest("form").submit()}}errorField.trigger("jqv.field.result",[errorField,options.isError,msg])}});
return rule.alertTextLoad}},_ajaxError:function(data,transport){if(data.status==0&&transport==null)alert("The page is not served from a server! ajax call failed");else if(typeof console!="undefined")console.log("Ajax error: "+data.status+" "+transport)},_dateToString:function(date){return date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate()},_parseDate:function(d){var dateParts=d.split("-");if(dateParts==d)dateParts=d.split("/");if(dateParts==d){dateParts=d.split(".");return new Date(dateParts[2],
dateParts[1]-1,dateParts[0])}return new Date(dateParts[0],dateParts[1]-1,dateParts[2])},_showPrompt:function(field,promptText,type,ajaxed,options,ajaxform){var prompt=methods._getPrompt(field);if(ajaxform)prompt=false;if($.trim(promptText))if(prompt)methods._updatePrompt(field,prompt,promptText,type,ajaxed,options);else methods._buildPrompt(field,promptText,type,ajaxed,options)},_buildPrompt:function(field,promptText,type,ajaxed,options){var prompt=$("<div>");prompt.addClass(methods._getClassName(field.attr("id"))+
"formError");prompt.addClass("parentForm"+methods._getClassName(field.closest("form, .validationEngineContainer").attr("id")));prompt.addClass("formError");switch(type){case "pass":prompt.addClass("greenPopup");break;case "load":prompt.addClass("blackPopup");break;default:}if(ajaxed)prompt.addClass("ajaxed");var promptContent=$("<div>").addClass("formErrorContent").html(promptText).appendTo(prompt);var positionType=field.data("promptPosition")||options.promptPosition;if(options.showArrow){var arrow=
$("<div>").addClass("formErrorArrow");if(typeof positionType=="string"){var pos=positionType.indexOf(":");if(pos!=-1)positionType=positionType.substring(0,pos)}switch(positionType){case "bottomLeft":case "bottomRight":prompt.find(".formErrorContent").before(arrow);arrow.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');
break;case "topLeft":case "topRight":arrow.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>');prompt.append(arrow);break}}if(options.addPromptClass)prompt.addClass(options.addPromptClass);
var requiredOverride=field.attr("data-required-class");if(requiredOverride!==undefined)prompt.addClass(requiredOverride);else if(options.prettySelect)if($("#"+field.attr("id")).next().is("select")){var prettyOverrideClass=$("#"+field.attr("id").substr(options.usePrefix.length).substring(options.useSuffix.length)).attr("data-required-class");if(prettyOverrideClass!==undefined)prompt.addClass(prettyOverrideClass)}prompt.css({"opacity":0});if(positionType==="inline"){prompt.addClass("inline");if(typeof field.attr("data-prompt-target")!==
"undefined"&&$("#"+field.attr("data-prompt-target")).length>0)prompt.appendTo($("#"+field.attr("data-prompt-target")));else field.after(prompt)}else field.before(prompt);var pos=methods._calculatePosition(field,prompt,options);prompt.css({"position":positionType==="inline"?"relative":"absolute","top":pos.callerTopPosition,"left":pos.callerleftPosition,"marginTop":pos.marginTopSize,"opacity":0}).data("callerField",field);if(options.autoHidePrompt)setTimeout(function(){prompt.animate({"opacity":0},
function(){prompt.closest(".formErrorOuter").remove();prompt.remove()})},options.autoHideDelay);return prompt.animate({"opacity":0.87})},_updatePrompt:function(field,prompt,promptText,type,ajaxed,options,noAnimation){if(prompt){if(typeof type!=="undefined"){if(type=="pass")prompt.addClass("greenPopup");else prompt.removeClass("greenPopup");if(type=="load")prompt.addClass("blackPopup");else prompt.removeClass("blackPopup")}if(ajaxed)prompt.addClass("ajaxed");else prompt.removeClass("ajaxed");prompt.find(".formErrorContent").html(promptText);
var pos=methods._calculatePosition(field,prompt,options);var css={"top":pos.callerTopPosition,"left":pos.callerleftPosition,"marginTop":pos.marginTopSize};if(noAnimation)prompt.css(css);else prompt.animate(css)}},_closePrompt:function(field){var prompt=methods._getPrompt(field);if(prompt)prompt.fadeTo("fast",0,function(){prompt.parent(".formErrorOuter").remove();prompt.remove()})},closePrompt:function(field){return methods._closePrompt(field)},_getPrompt:function(field){var formId=$(field).closest("form, .validationEngineContainer").attr("id");
var className=methods._getClassName(field.attr("id"))+"formError";var match=$("."+methods._escapeExpression(className)+".parentForm"+formId)[0];if(match)return $(match)},_escapeExpression:function(selector){return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(field){var $document=$(document);var $body=$("body");var rtl=field&&field.hasClass("rtl")||(field&&(field.attr("dir")||"").toLowerCase()==="rtl"||($document.hasClass("rtl")||(($document.attr("dir")||"").toLowerCase()===
"rtl"||($body.hasClass("rtl")||($body.attr("dir")||"").toLowerCase()==="rtl"))));return Boolean(rtl)},_calculatePosition:function(field,promptElmt,options){var promptTopPosition,promptleftPosition,marginTopSize;var fieldWidth=field.width();var fieldLeft=field.position().left;var fieldTop=field.position().top;var fieldHeight=field.height();var promptHeight=promptElmt.height();promptTopPosition=promptleftPosition=0;marginTopSize=-promptHeight;var positionType=field.data("promptPosition")||options.promptPosition;
var shift1="";var shift2="";var shiftX=0;var shiftY=0;if(typeof positionType=="string")if(positionType.indexOf(":")!=-1){shift1=positionType.substring(positionType.indexOf(":")+1);positionType=positionType.substring(0,positionType.indexOf(":"));if(shift1.indexOf(",")!=-1){shift2=shift1.substring(shift1.indexOf(",")+1);shift1=shift1.substring(0,shift1.indexOf(","));shiftY=parseInt(shift2);if(isNaN(shiftY))shiftY=0}shiftX=parseInt(shift1);if(isNaN(shift1))shift1=0}switch(positionType){default:case "topRight":promptleftPosition+=
fieldLeft+fieldWidth-30;promptTopPosition+=fieldTop;break;case "topLeft":promptTopPosition+=fieldTop;promptleftPosition+=fieldLeft;break;case "centerRight":promptTopPosition=fieldTop+4;marginTopSize=0;promptleftPosition=fieldLeft+field.outerWidth(true)+5;break;case "centerLeft":promptleftPosition=fieldLeft-(promptElmt.width()+2);promptTopPosition=fieldTop+4;marginTopSize=0;break;case "bottomLeft":promptTopPosition=fieldTop+field.height()+5;marginTopSize=0;promptleftPosition=fieldLeft;break;case "bottomRight":promptleftPosition=
fieldLeft+fieldWidth-30;promptTopPosition=fieldTop+field.height()+5;marginTopSize=0;break;case "inline":promptleftPosition=0;promptTopPosition=0;marginTopSize=0}promptleftPosition+=shiftX;promptTopPosition+=shiftY;return{"callerTopPosition":promptTopPosition+"px","callerleftPosition":promptleftPosition+"px","marginTopSize":marginTopSize+"px"}},_saveOptions:function(form,options){if($.validationEngineLanguage)var allRules=$.validationEngineLanguage.allRules;else $.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");
$.validationEngine.defaults.allrules=allRules;var userOptions=$.extend(true,{},$.validationEngine.defaults,options);form.data("jqv",userOptions);return userOptions},_getClassName:function(className){if(className)return className.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(str){return str.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(field,rules,i,options){var idx,dependingField;for(idx=i+1;idx<rules.length;idx++){dependingField=jQuery("#"+rules[idx]).first();
if(dependingField.length&&methods._required(dependingField,["required"],0,options,true)==undefined)return methods._required(field,["required"],0,options)}},_submitButtonClick:function(event){var button=$(this);var form=button.closest("form, .validationEngineContainer");form.data("jqv_submitButton",button.attr("id"))}};$.fn.validationEngine=function(method){var form=$(this);if(!form[0])return form;if(typeof method=="string"&&(method.charAt(0)!="_"&&methods[method])){if(method!="showPrompt"&&(method!=
"hide"&&method!="hideAll"))methods.init.apply(form);return methods[method].apply(form,Array.prototype.slice.call(arguments,1))}else if(typeof method=="object"||!method){methods.init.apply(form,arguments);return methods.attach.apply(form)}else $.error("Method "+method+" does not exist in jQuery.validationEngine")};$.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",
inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:$.noop,onBeforeAjaxFormValidation:$.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",
autoHidePrompt:false,autoHideDelay:1E4,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};$(function(){$.validationEngine.defaults.promptPosition=methods.isRTL()?"topLeft":"topRight"})})(jQuery);
(function($){$.fn.validationEngineLanguage=function(){};$.validationEngineLanguage={newLang:function(){$.validationEngineLanguage.allRules={"required":{"regex":"none","alertText":"This field is required","alertTextCheckboxMultiple":"Please select an option","alertTextCheckboxe":"This checkbox is required","alertTextDateRange":"Both date range fields are required"},"requiredInFunction":{"func":function(field,rules,i,options){return field.val()=="test"?true:false},"alertText":"Field must equal test"},
"dateRange":{"regex":"none","alertText":"Invalid","alertText2":"Date Range"},"dateTimeRange":{"regex":"none","alertText":"Invalid","alertText2":"Date Time Range"},"minSize":{"regex":"none","alertText":"Minimum","alertText2":" characters required"},"maxSize":{"regex":"none","alertText":"Maximum","alertText2":" characters allowed"},"groupRequired":{"regex":"none","alertText":"You must fill one of the following fields"},"min":{"regex":"none","alertText":"Minimum value is "},"max":{"regex":"none","alertText":"Maximum value is "},
"past":{"regex":"none","alertText":"Date prior to "},"future":{"regex":"none","alertText":"Date past "},"maxCheckbox":{"regex":"none","alertText":"Maximum","alertText2":" options allowed"},"minCheckbox":{"regex":"none","alertText":"Please select ","alertText2":" options"},"equals":{"regex":"none","alertText":"Fields do not match"},"creditCard":{"regex":"none","alertText":"Invalid credit card number"},"phone":{"regex":/^([\+][0-9]{1,3}[\ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9\ \.\-\/]{3,20})((x|ext|extension)[\ ]?[0-9]{1,4})?$/,
"alertText":"Invalid phone number"},"email":{"regex":/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"alertText":"Invalid email address"},"integer":{"regex":/^[\-\+]?\d+$/,"alertText":"Not a valid integer"},"number":{"regex":/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"alertText":"Invalid floating decimal number"},"date":{"func":function(field){var pattern=new RegExp(/^(\d{4})[\/\-\.](0?[1-9]|1[012])[\/\-\.](0?[1-9]|[12][0-9]|3[01])$/);
var match=pattern.exec(field.val());if(match==null)return false;var year=match[1];var month=match[2]*1;var day=match[3]*1;var date=new Date(year,month-1,day);return date.getFullYear()==year&&(date.getMonth()==month-1&&date.getDate()==day)},"alertText":"Invalid date, must be in YYYY-MM-DD format"},"ipv4":{"regex":/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,"alertText":"Invalid IP address"},"url":{"regex":/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
"alertText":"Invalid URL"},"onlyNumberSp":{"regex":/^[0-9\ ]+$/,"alertText":"Numbers only"},"onlyLetterSp":{"regex":/^[a-zA-Z\ \']+$/,"alertText":"Letters only"},"onlyLetterNumber":{"regex":/^[0-9a-zA-Z]+$/,"alertText":"No special characters allowed"},"ajaxUserCall":{"url":"ajaxValidateFieldUser","extraData":"name=eric","alertText":"This user is already taken","alertTextLoad":"Validating, please wait"},"ajaxUserCallPhp":{"url":"phpajax/ajaxValidateFieldUser.php","extraData":"name=eric","alertTextOk":"This username is available",
"alertText":"This user is already taken","alertTextLoad":"Validating, please wait"},"ajaxNameCall":{"url":"ajaxValidateFieldName","alertText":"This name is already taken","alertTextOk":"This name is available","alertTextLoad":"Validating, please wait"},"ajaxNameCallPhp":{"url":"phpajax/ajaxValidateFieldName.php","alertText":"This name is already taken","alertTextLoad":"Validating, please wait"},"validate2fields":{"alertText":"Please input HELLO"},"dateFormat":{"regex":/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/,
"alertText":"Invalid Date"},"dateTimeFormat":{"regex":/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/,"alertText":"Invalid Date or Date Format",
"alertText2":"Expected Format:","alertText3":"mm/dd/yyyy hh:mm:ss AM|PM or ","alertText4":"yyyy-mm-dd hh:mm:ss AM|PM"}}}};$.validationEngineLanguage.newLang()})(jQuery);
(function($){var delimiter=new Array;var tags_callbacks=new Array;$.fn.doAutosize=function(o){var minWidth=$(this).data("minwidth"),maxWidth=$(this).data("maxwidth"),val="",input=$(this),testSubject=$("#"+$(this).data("tester_id"));if(val===(val=input.val()))return;var escaped=val.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");testSubject.html(escaped);var testerWidth=testSubject.width(),newWidth=testerWidth+o.comfortZone>=minWidth?testerWidth+o.comfortZone:minWidth,
currentWidth=input.width(),isValidWidthChange=newWidth<currentWidth&&newWidth>=minWidth||newWidth>minWidth&&newWidth<maxWidth;if(isValidWidthChange)input.width(newWidth)};$.fn.resetAutosize=function(options){var minWidth=$(this).data("minwidth")||(options.minInputWidth||$(this).width()),maxWidth=$(this).data("maxwidth")||(options.maxInputWidth||$(this).closest(".tagsinput").width()-options.inputPadding),val="",input=$(this),testSubject=$("<tester/>").css({position:"absolute",top:-9999,left:-9999,
width:"auto",fontSize:input.css("fontSize"),fontFamily:input.css("fontFamily"),fontWeight:input.css("fontWeight"),letterSpacing:input.css("letterSpacing"),whiteSpace:"nowrap"}),testerId=$(this).attr("id")+"_autosize_tester";if(!$("#"+testerId).length>0){testSubject.attr("id",testerId);testSubject.appendTo("body")}input.data("minwidth",minWidth);input.data("maxwidth",maxWidth);input.data("tester_id",testerId);input.css("width",minWidth)};$.fn.addTag=function(value,options){options=jQuery.extend({focus:false,
callback:true},options);this.each(function(){var id=$(this).attr("id");var tagslist=$(this).val().split(delimiter[id]);if(tagslist[0]=="")tagslist=new Array;value=jQuery.trim(value);if(options.unique){var skipTag=$(this).tagExist(value);if(skipTag==true)$("#"+id+"_tag").addClass("not_valid")}else var skipTag=false;if(value!=""&&skipTag!=true){$("<span>").addClass("tag").append($("<span>").text(value).append("&nbsp;&nbsp;"),$("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return $("#"+
id).removeTag(escape(value))})).insertBefore("#"+id+"_addTag");tagslist.push(value);$("#"+id+"_tag").val("");if(options.focus)$("#"+id+"_tag").focus();else $("#"+id+"_tag").blur();$.fn.tagsInput.updateTagsField(this,tagslist);if(options.callback&&(tags_callbacks[id]&&tags_callbacks[id]["onAddTag"])){var f=tags_callbacks[id]["onAddTag"];f.call(this,value)}if(tags_callbacks[id]&&tags_callbacks[id]["onChange"]){var i=tagslist.length;var f=tags_callbacks[id]["onChange"];f.call(this,$(this),tagslist[i-
1])}}});return false};$.fn.removeTag=function(value){value=unescape(value);this.each(function(){var id=$(this).attr("id");var old=$(this).val().split(delimiter[id]);$("#"+id+"_tagsinput .tag").remove();str="";for(i=0;i<old.length;i++)if(old[i]!=value)str=str+delimiter[id]+old[i];$.fn.tagsInput.importTags(this,str);if(tags_callbacks[id]&&tags_callbacks[id]["onRemoveTag"]){var f=tags_callbacks[id]["onRemoveTag"];f.call(this,value)}});return false};$.fn.tagExist=function(val){var id=$(this).attr("id");
var tagslist=$(this).val().split(delimiter[id]);return jQuery.inArray(val,tagslist)>=0};$.fn.importTags=function(str){id=$(this).attr("id");$("#"+id+"_tagsinput .tag").remove();$.fn.tagsInput.importTags(this,str)};$.fn.tagsInput=function(options){var settings=jQuery.extend({interactive:true,defaultText:"add a tag",minChars:0,width:"300px",height:"auto",autocomplete:{selectFirst:false},"hide":true,"delimiter":",","unique":true,removeWithBackspace:true,placeholderColor:"#666666",autosize:true,comfortZone:20,
inputPadding:6*2},options);this.each(function(){if(settings.hide)$(this).hide();var id=$(this).attr("id");if(!id||delimiter[$(this).attr("id")])id=$(this).attr("id","tags"+(new Date).getTime()).attr("id");var data=jQuery.extend({pid:id,real_input:"#"+id,holder:"#"+id+"_tagsinput",input_wrapper:"#"+id+"_addTag",fake_input:"#"+id+"_tag"},settings);delimiter[id]=data.delimiter;if(settings.onAddTag||(settings.onRemoveTag||settings.onChange)){tags_callbacks[id]=new Array;tags_callbacks[id]["onAddTag"]=
settings.onAddTag;tags_callbacks[id]["onRemoveTag"]=settings.onRemoveTag;tags_callbacks[id]["onChange"]=settings.onChange}var markup='<div id="'+id+'_tagsinput" class="tagsinput"><div id="'+id+'_addTag">';if(settings.interactive)markup=markup+'<input id="'+id+'_tag" value="" data-default="'+settings.defaultText+'" />';markup=markup+'</div><div class="tags_clear"></div></div>';$(markup).insertAfter(this);$(data.holder).css("width",settings.width);$(data.holder).css("min-height",settings.height);$(data.holder).css("height",
settings.height);if($(data.real_input).val()!="")$.fn.tagsInput.importTags($(data.real_input),$(data.real_input).val());if(settings.interactive){$(data.fake_input).val($(data.fake_input).attr("data-default"));$(data.fake_input).css("color",settings.placeholderColor);$(data.fake_input).resetAutosize(settings);$(data.holder).bind("click",data,function(event){$(event.data.fake_input).focus()});$(data.fake_input).bind("focus",data,function(event){if($(event.data.fake_input).val()==$(event.data.fake_input).attr("data-default"))$(event.data.fake_input).val("");
$(event.data.fake_input).css("color","#000000")});if(settings.autocomplete_url!=undefined){autocomplete_options={source:settings.autocomplete_url};for(attrname in settings.autocomplete)autocomplete_options[attrname]=settings.autocomplete[attrname];if(jQuery.Autocompleter!==undefined){$(data.fake_input).autocomplete(settings.autocomplete_url,settings.autocomplete);$(data.fake_input).bind("result",data,function(event,data,formatted){if(data)$("#"+id).addTag(data[0]+"",{focus:true,unique:settings.unique})})}else if(jQuery.ui.autocomplete!==
undefined){$(data.fake_input).autocomplete(autocomplete_options);$(data.fake_input).bind("autocompleteselect",data,function(event,ui){$(event.data.real_input).addTag(ui.item.value,{focus:true,unique:settings.unique});return false})}}else $(data.fake_input).bind("blur",data,function(event){var d=$(this).attr("data-default");if($(event.data.fake_input).val()!=""&&$(event.data.fake_input).val()!=d){if(event.data.minChars<=$(event.data.fake_input).val().length&&(!event.data.maxChars||event.data.maxChars>=
$(event.data.fake_input).val().length))$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:settings.unique})}else{$(event.data.fake_input).val($(event.data.fake_input).attr("data-default"));$(event.data.fake_input).css("color",settings.placeholderColor)}return false});$(data.fake_input).bind("keypress",data,function(event){if(event.which==event.data.delimiter.charCodeAt(0)||event.which==13){event.preventDefault();if(event.data.minChars<=$(event.data.fake_input).val().length&&
(!event.data.maxChars||event.data.maxChars>=$(event.data.fake_input).val().length))$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:settings.unique});$(event.data.fake_input).resetAutosize(settings);return false}else if(event.data.autosize)$(event.data.fake_input).doAutosize(settings)});data.removeWithBackspace&&$(data.fake_input).bind("keydown",function(event){if(event.keyCode==8&&$(this).val()==""){event.preventDefault();var last_tag=$(this).closest(".tagsinput").find(".tag:last").text();
var id=$(this).attr("id").replace(/_tag$/,"");last_tag=last_tag.replace(/[\s]+x$/,"");$("#"+id).removeTag(escape(last_tag));$(this).trigger("focus")}});$(data.fake_input).blur();if(data.unique)$(data.fake_input).keydown(function(event){if(event.keyCode==8||String.fromCharCode(event.which).match(/\w+|[\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da\u00f1\u00d1,/]+/))$(this).removeClass("not_valid")})}});return this};$.fn.tagsInput.updateTagsField=function(obj,tagslist){var id=$(obj).attr("id");
$(obj).val(tagslist.join(delimiter[id]))};$.fn.tagsInput.importTags=function(obj,val){$(obj).val("");var id=$(obj).attr("id");var tags=val.split(delimiter[id]);for(i=0;i<tags.length;i++)$(obj).addTag(tags[i],{focus:false,callback:false});if(tags_callbacks[id]&&tags_callbacks[id]["onChange"]){var f=tags_callbacks[id]["onChange"];f.call(obj,obj,tags[i])}}})(jQuery);
(function(e,t,n,r){function o(t,n){this.element=e(t);this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="minimalect",s={theme:"",transition:"fade",placeholder:"Select a choice",empty:"No results match your keyword.",class_container:"minict_wrapper",class_group:"minict_group",class_empty:"minict_empty",class_active:"active",class_selected:"selected",class_hidden:"hidden",class_highlighted:"highlighted",class_first:"minict_first",class_last:"minict_last",beforeinit:function(){},
afterinit:function(){},onchange:function(){},onopen:function(){},onclose:function(){},onfilter:function(){}};o.prototype={init:function(){this.options.beforeinit();var t=this;this.wrapper=e('<div class="'+this.options.class_container+'"></div>');this.element.hide().after(this.wrapper);if(this.options.theme)this.wrapper.addClass(this.options.theme);this.wrapper.append('<input type="text" value="'+(this.element.find("option[selected]").html()||"")+'" placeholder="'+(this.element.find("option[selected]").html()||
this.options.placeholder)+'" />');this.wrapper.append("<ul>"+t.parseSelect(t.element,t.options)+'<li class="'+t.options.class_empty+'">'+t.options.empty+"</li></ul>");if(this.element.find("option[selected]").length>0)this.wrapper.find('li[data-value="'+this.element.find("option[selected]").val()+'"]').addClass(t.options.class_selected);t.element.on("change",function(){var e=t.wrapper.find("li."+t.options.class_selected),n=t.parseSelect(t.element,t.options);if(t.element.val()!=e.attr("data-value"))t.hideChoices(t.wrapper,
t.options,function(){if(t.element.val()==="")t.wrapper.children("input").val("").attr("placeholder",t.options.placeholder);else{t.wrapper.children("ul").html(n+'<li class="'+t.options.class_empty+'">'+t.options.empty+"</li>");t.selectChoice(t.wrapper.find('li[data-value="'+t.element.val()+'"]'),t.wrapper,t.element,t.options)}})});e(n).on("click",function(){t.hideChoices(t.wrapper,t.options)});this.wrapper.on("click",function(e){e.stopPropagation();t.toggleChoices(t.wrapper,t.options)});this.wrapper.on("click",
"li:not(."+t.options.class_group+", ."+t.options.class_empty+")",function(){t.selectChoice(e(this),t.wrapper,t.element,t.options)});this.wrapper.on("click","li."+t.options.class_group+", li."+t.options.class_empty,function(e){e.stopPropagation();t.wrapper.children("input").focus()});this.wrapper.find("input").on("focus click",function(e){e.stopPropagation();t.showChoices(t.wrapper,t.options)}).on("keyup",function(e){switch(e.keyCode){case 38:t.navigateChoices("up",t.wrapper,t.options);return false;
break;case 40:t.navigateChoices("down",t.wrapper,t.options);return false;break;case 13:if(t.wrapper.find("li."+t.options.class_highlighted).length!=0)t.selectChoice(t.wrapper.find("li."+t.options.class_highlighted),t.wrapper,t.element,t.options);else t.selectChoice(t.wrapper.find("li:not(."+t.options.class_group+", ."+t.options.class_empty+")").first(),t.wrapper,t.element,t.options);t.hideChoices(t.wrapper,t.options);return false;break}t.filterChoices(t.wrapper,t.options)});this.options.afterinit()},
navigateChoices:function(e,t,n){ignored="."+n.class_hidden+", ."+n.class_empty+", ."+n.class_group;if(t.find("li."+n.class_highlighted).length==0){if(e=="up")t.find("li:not("+ignored+")").last().addClass(n.class_highlighted);else if(e=="down")t.find("li:not("+ignored+")").first().addClass(n.class_highlighted);return false}else{cur=t.find("li."+n.class_highlighted);cur.removeClass(n.class_highlighted);if(e=="up")if(t.find("li:not("+ignored+")").first()[0]!=cur[0]){cur.prevAll("li").not(ignored).first().addClass(n.class_highlighted);
var r=t.children("ul"),i=t.find("li."+n.class_highlighted).offset().top-r.offset().top+r.scrollTop();if(r.scrollTop()>i)r.scrollTop(i)}else{t.find("li:not("+ignored+")").last().addClass(n.class_highlighted);t.children("ul").scrollTop(t.children("ul").height())}else if(e=="down")if(t.find("li:not("+ignored+")").last()[0]!=cur[0]){cur.nextAll("li").not(ignored).first().addClass(n.class_highlighted);var r=t.children("ul"),s=r.height(),o=t.find("li."+n.class_highlighted).offset().top-r.offset().top+t.find("li."+
n.class_highlighted).outerHeight();if(s<o)r.scrollTop(r.scrollTop()+o-s)}else{t.find("li:not("+ignored+")").first().addClass(n.class_highlighted);t.children("ul").scrollTop(0)}}},parseSelect:function(t,n){var r="",i=this;if(t.find("optgroup").length==0)r=this.parseElements(t.html());else t.find("optgroup").each(function(){r+='<li class="'+n.class_group+'">'+e(this).attr("label")+"</li>";r+=i.parseElements(e(this).html())});return r},parseElements:function(t){var n="";e(e.trim(t)).filter("option").each(function(){var t=
e(this);if(t.attr("value")==="")return;n+='<li data-value="'+t.val()+'" class="'+(t.attr("class")||"")+'">'+t.text()+"</li>"});return n},toggleChoices:function(e,t){!e.hasClass(t.class_active)?this.showChoices(e,t):this.hideChoices(e,t)},showChoices:function(t,n,r){if(!t.hasClass(n.class_active)){this.updateFirstLast(false,t,n);var i=this;e("."+n.class_container).each(function(){if(e(this)[0]!=t[0])i.hideChoices(e(this),n)});if(typeof r=="function")r.call();t.addClass(n.class_active);switch(n.transition){case "fade":t.children("ul").fadeIn(150);
break;default:t.children("ul").show();break}t.children("input").val("").focus();this.options.onopen()}else if(typeof r=="function")r.call()},resetDropdown:function(e,t,n){e.find("li").removeClass(t.class_hidden);e.find("."+t.class_empty).hide();e.find("li."+t.class_highlighted).removeClass(t.class_highlighted);if(typeof n=="function")n.call()},hideChoices:function(e,t,n){if(e.hasClass(t.class_active)){e.removeClass(t.class_active);switch(t.transition){case "fade":e.children("ul").fadeOut(100);break;
default:e.children("ul").hide();break}this.resetDropdown(e,t,n);e.children("input").blur();if(e.children("input").attr("placeholder")!=t.placeholder)e.children("input").val(e.children("input").attr("placeholder"));else if(e.find("li."+t.class_selected).length==0)e.children("input").val("");this.options.onclose()}else if(typeof n=="function")n.call()},filterChoices:function(t,n){var r=t.children("input").val();t.find("li."+n.class_highlighted).removeClass(n.class_highlighted);t.find("li:not("+n.class_group+
")").each(function(){if(e(this).text().search(new RegExp(r,"i"))<0)e(this).addClass(n.class_hidden);else e(this).removeClass(n.class_hidden)});t.find("li."+n.class_group).removeClass(n.class_hidden).each(function(){nextlis=e(this).nextAll("li").not("."+n.class_hidden+", ."+n.class_empty);if(nextlis.first().hasClass(n.class_group)||nextlis.length==0)e(this).addClass(n.class_hidden)});t.find("."+n.class_empty).hide();if(t.find("li").not("."+n.class_hidden+", ."+n.class_empty).length==0){t.find("."+
n.class_empty).show();this.options.onfilter(false)}else this.options.onfilter(true);this.updateFirstLast(true,t,n)},selectChoice:function(e,t,n,r){t.find("li").removeClass(r.class_selected);e.addClass(r.class_selected);t.children("input").val(e.text()).attr("placeholder",e.text());n.find("option:selected").prop("selected",false);n.find('option[value="'+e.attr("data-value")+'"]').prop("selected",true);this.options.onchange(e.attr("data-value"),e.text())},updateFirstLast:function(e,t,n){t.find("."+
n.class_first+", ."+n.class_last).removeClass(n.class_first+" "+n.class_last);if(e){t.find("li:visible").first().addClass(n.class_first);t.find("li:visible").last().addClass(n.class_last)}else{t.find("li").first().addClass(n.class_first);t.find("li").not("."+n.class_empty).last().addClass(n.class_last)}}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i))e.data(this,"plugin_"+i,new o(this,t))})}})(jQuery,window,document);
/*! iCheck v1.0.2 by Damir Sultanov, http://git.io/arlzeA, MIT Licensed */
(function(f){function A(a,b,d){var c=a[0],g=/er/.test(d)?_indeterminate:/bl/.test(d)?n:k,e=d==_update?{checked:c[k],disabled:c[n],indeterminate:"true"==a.attr(_indeterminate)||"false"==a.attr(_determinate)}:c[g];if(/^(ch|di|in)/.test(d)&&!e)x(a,g);else if(/^(un|en|de)/.test(d)&&e)q(a,g);else if(d==_update)for(var f in e)e[f]?x(a,f,!0):q(a,f,!0);else if(!b||"toggle"==d){if(!b)a[_callback]("ifClicked");e?c[_type]!==r&&q(a,g):x(a,g)}}function x(a,b,d){var c=a[0],g=a.parent(),e=b==k,u=b==_indeterminate,
v=b==n,s=u?_determinate:e?y:"enabled",F=l(a,s+t(c[_type])),B=l(a,b+t(c[_type]));if(!0!==c[b]){if(!d&&b==k&&c[_type]==r&&c.name){var w=a.closest("form"),p='input[name="'+c.name+'"]',p=w.length?w.find(p):f(p);p.each(function(){this!==c&&f(this).data(m)&&q(f(this),b)})}u?(c[b]=!0,c[k]&&q(a,k,"force")):(d||(c[b]=!0),e&&c[_indeterminate]&&q(a,_indeterminate,!1));D(a,e,b,d)}c[n]&&l(a,_cursor,!0)&&g.find("."+C).css(_cursor,"default");g[_add](B||l(a,b)||"");g.attr("role")&&!u&&g.attr("aria-"+(v?n:k),"true");
g[_remove](F||l(a,s)||"")}function q(a,b,d){var c=a[0],g=a.parent(),e=b==k,f=b==_indeterminate,m=b==n,s=f?_determinate:e?y:"enabled",q=l(a,s+t(c[_type])),r=l(a,b+t(c[_type]));if(!1!==c[b]){if(f||!d||"force"==d)c[b]=!1;D(a,e,s,d)}!c[n]&&l(a,_cursor,!0)&&g.find("."+C).css(_cursor,"pointer");g[_remove](r||l(a,b)||"");g.attr("role")&&!f&&g.attr("aria-"+(m?n:k),"false");g[_add](q||l(a,s)||"")}function E(a,b){if(a.data(m)){a.parent().html(a.attr("style",a.data(m).s||""));if(b)a[_callback](b);a.off(".i").unwrap();
f(_label+'[for="'+a[0].id+'"]').add(a.closest(_label)).off(".i")}}function l(a,b,f){if(a.data(m))return a.data(m).o[b+(f?"":"Class")]}function t(a){return a.charAt(0).toUpperCase()+a.slice(1)}function D(a,b,f,c){if(!c){if(b)a[_callback]("ifToggled");a[_callback]("ifChanged")[_callback]("if"+t(f))}}var m="iCheck",C=m+"-helper",r="radio",k="checked",y="un"+k,n="disabled";_determinate="determinate";_indeterminate="in"+_determinate;_update="update";_type="type";_click="click";_touch="touchbegin.i touchend.i";
_add="addClass";_remove="removeClass";_callback="trigger";_label="label";_cursor="cursor";_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);f.fn[m]=function(a,b){var d='input[type="checkbox"], input[type="'+r+'"]',c=f(),g=function(a){a.each(function(){var a=f(this);c=a.is(d)?c.add(a):c.add(a.find(d))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(a))return a=a.toLowerCase(),g(this),c.each(function(){var c=
f(this);"destroy"==a?E(c,"ifDestroyed"):A(c,!0,a);f.isFunction(b)&&b()});if("object"!=typeof a&&a)return this;var e=f.extend({checkedClass:k,disabledClass:n,indeterminateClass:_indeterminate,labelHover:!0},a),l=e.handle,v=e.hoverClass||"hover",s=e.focusClass||"focus",t=e.activeClass||"active",B=!!e.labelHover,w=e.labelHoverClass||"hover",p=(""+e.increaseArea).replace("%","")|0;if("checkbox"==l||l==r)d='input[type="'+l+'"]';-50>p&&(p=-50);g(this);return c.each(function(){var a=f(this);E(a);var c=this,
b=c.id,g=-p+"%",d=100+2*p+"%",d={position:"absolute",top:g,left:g,display:"block",width:d,height:d,margin:0,padding:0,background:"#fff",border:0,opacity:0},g=_mobile?{position:"absolute",visibility:"hidden"}:p?d:{position:"absolute",opacity:0},l="checkbox"==c[_type]?e.checkboxClass||"icheckbox":e.radioClass||"i"+r,z=f(_label+'[for="'+b+'"]').add(a.closest(_label)),u=!!e.aria,y=m+"-"+Math.random().toString(36).substr(2,6),h='<div class="'+l+'" '+(u?'role="'+c[_type]+'" ':"");u&&z.each(function(){h+=
'aria-labelledby="';this.id?h+=this.id:(this.id=y,h+=y);h+='"'});h=a.wrap(h+"/>")[_callback]("ifCreated").parent().append(e.insert);d=f('<ins class="'+C+'"/>').css(d).appendTo(h);a.data(m,{o:e,s:a.attr("style")}).css(g);e.inheritClass&&h[_add](c.className||"");e.inheritID&&b&&h.attr("id",m+"-"+b);"static"==h.css("position")&&h.css("position","relative");A(a,!0,_update);if(z.length)z.on(_click+".i mouseover.i mouseout.i "+_touch,function(b){var d=b[_type],e=f(this);if(!c[n]){if(d==_click){if(f(b.target).is("a"))return;
A(a,!1,!0)}else B&&(/ut|nd/.test(d)?(h[_remove](v),e[_remove](w)):(h[_add](v),e[_add](w)));if(_mobile)b.stopPropagation();else return!1}});a.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(b){var d=b[_type];b=b.keyCode;if(d==_click)return!1;if("keydown"==d&&32==b)return c[_type]==r&&c[k]||(c[k]?q(a,k):x(a,k)),!1;if("keyup"==d&&c[_type]==r)!c[k]&&x(a,k);else if(/us|ur/.test(d))h["blur"==d?_remove:_add](s)});d.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(b){var d=
b[_type],e=/wn|up/.test(d)?t:v;if(!c[n]){if(d==_click)A(a,!1,!0);else{if(/wn|er|in/.test(d))h[_add](e);else h[_remove](e+" "+t);if(z.length&&B&&e==v)z[/ut|nd/.test(d)?_remove:_add](w)}if(_mobile)b.stopPropagation();else return!1}})})}})(window.jQuery||window.Zepto);